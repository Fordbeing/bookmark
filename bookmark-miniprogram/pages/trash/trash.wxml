<!--pages/trash/trash.wxml-->
<view class="trash-page">
  <!-- å›ºå®šæ ‡é¢˜æ  -->
  <view class="header-bar">
    <text class="title">ğŸ—‘ï¸ å›æ”¶ç«™</text>
    <view 
      class="clear-btn" 
      wx:if="{{bookmarks.length > 0}}"
      bindtap="clearTrash"
    >æ¸…ç©º</view>
  </view>

  <!-- å¯æ»šåŠ¨ä¹¦ç­¾åˆ—è¡¨ -->
  <scroll-view 
    class="bookmark-list" 
    scroll-y 
    refresher-enabled
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresh"
  >
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && bookmarks.length === 0}}">
      <text class="icon">ğŸ—‘ï¸</text>
      <text class="text">å›æ”¶ç«™æ˜¯ç©ºçš„</text>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>

    <!-- ä¹¦ç­¾å¡ç‰‡ - å¯æ»‘åŠ¨æ¢å¤ -->
    <view 
      wx:for="{{bookmarks}}" 
      wx:key="id"
      class="swipe-container"
    >
      <view 
        class="swipe-content"
        style="transform: translateX({{item.offsetX || 0}}rpx)"
        data-id="{{item.id}}"
        data-index="{{index}}"
        bindtouchstart="onTouchStart"
        bindtouchmove="onTouchMove"
        bindtouchend="onTouchEnd"
      >
        <view class="trash-card">
          <view class="card-header">
            <view class="card-icon">
              <text>{{item.title[0] || '?'}}</text>
            </view>
            <view class="card-info">
              <text class="card-title">{{item.title || item.url}}</text>
              <text class="card-url">{{item.url}}</text>
            </view>
          </view>
        </view>
      </view>
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="swipe-actions">
        <view class="action-restore" data-id="{{item.id}}" bindtap="restoreBookmark">æ¢å¤</view>
        <view class="action-delete" data-id="{{item.id}}" bindtap="permanentDelete">åˆ é™¤</view>
      </view>
    </view>
  </scroll-view>
</view>
