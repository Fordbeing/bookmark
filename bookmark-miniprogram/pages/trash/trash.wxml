<!--pages/trash/trash.wxml-->
<view class="trash-page">
  <!-- æ ‡é¢˜æ  -->
  <view class="header-bar">
    <text class="title">ğŸ—‘ï¸ å›æ”¶ç«™</text>
    <button 
      class="btn btn-danger btn-sm" 
      wx:if="{{bookmarks.length > 0}}"
      bindtap="clearTrash"
    >æ¸…ç©ºå›æ”¶ç«™</button>
  </view>

  <!-- ä¹¦ç­¾åˆ—è¡¨ -->
  <scroll-view 
    class="bookmark-list" 
    scroll-y 
    refresher-enabled
    refresher-triggered="{{refreshing}}"
    bindrefresherrefresh="onRefresh"
  >
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && bookmarks.length === 0}}">
      <text class="icon">ğŸ—‘ï¸</text>
      <text class="text">å›æ”¶ç«™æ˜¯ç©ºçš„</text>
    </view>

    <!-- åŠ è½½ä¸­ -->
    <view class="loading" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- ä¹¦ç­¾å¡ç‰‡ -->
    <view 
      wx:for="{{bookmarks}}" 
      wx:key="id"
      class="trash-card card"
    >
      <!-- å¤´éƒ¨ -->
      <view class="card-header">
        <view class="card-icon">
          <text>{{item.title[0] || '?'}}</text>
        </view>
        <view class="card-title-wrapper">
          <text class="card-title truncate">{{item.title || item.url}}</text>
          <text class="card-url truncate">{{item.url}}</text>
        </view>
      </view>

      <!-- æè¿° -->
      <text class="card-desc line-clamp-2">{{item.description || 'æš‚æ— æè¿°...'}}</text>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="card-actions">
        <button 
          class="btn btn-success btn-sm" 
          data-id="{{item.id}}"
          bindtap="restoreBookmark"
        >æ¢å¤</button>
        <button 
          class="btn btn-danger-outline btn-sm" 
          data-id="{{item.id}}"
          bindtap="permanentDelete"
        >æ°¸ä¹…åˆ é™¤</button>
      </view>
    </view>
  </scroll-view>
</view>
